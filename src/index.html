<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />

    <style>
      body { font-family: Tahoma, Geneva, sans-serif }
    </style>

    <!-- colyseus.js client -->
    <script type="text/javascript" src="https://unpkg.com/colyseus.js@^0.14.0/dist/colyseus.js"></script>

  </head>
  <body>
    <div id="status"></div>

    <script>
      //var host = window.document.location.host.replace(/:.*/, '')

      var client = new Colyseus.Client('ws://spotit-backend.test:2567')
      client.joinOrCreate('spotit').then(room => {
        console.log('joined')
        room.onStateChange.once(function(state) {
            console.log('initial room state:', state)
        })

        // new room state
        room.onStateChange(function(state) {
            // this signal is triggered on each patch
        })

        // listen to patches coming from the server
        room.onMessage("status", function(status) {
            var div = document.createElement("div")
            div.innerHTML = 'Player Name: ' + status.playerName + '<br>'
            div.innerHTML += 'Player Score: ' + status.playerScore + '<br>'

            document.querySelector("#status").appendChild(div)
        })
      })

    </script>
  </body>
</html>
